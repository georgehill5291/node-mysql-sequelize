FROM node:slim
WORKDIR /usr/src/app
ENV PORT=4004
ENV MYSQL_HOST=MYSQL_HOST
ENV MYSQL_USER=MYSQL_USER
ENV MYSQL_PASSWORD=MYSQL_PASSWORD
ENV MYSQL_DB=MYSQL_DB
ENV REDIS_HOST=REDIS_HOST
ENV REDIS_PORT=REDIS_PORT
ENV REDIS_PASSWORD=REDIS_PASSWORD
COPY package.json .

RUN yarn install
COPY . .
EXPOSE 4004
CMD ["yarn", "server"] 